Query: database/optimized_query.sql
Execution Time: 0.33 seconds
--------------------------------------------------
Unique  (cost=7305.55..7305.68 rows=27 width=130) (actual time=317.815..317.844 rows=236 loops=1)
  Buffers: shared hit=6251
  ->  Sort  (cost=7305.55..7305.61 rows=27 width=130) (actual time=317.814..317.823 rows=236 loops=1)
        Sort Key: c.id, (ts_rank(c.fts, '''product'' <-> ''manag'' | ''pm'' | ''product'' <-> ''owner'''::tsquery)) DESC
        Sort Method: quicksort  Memory: 60kB
        Buffers: shared hit=6251
        ->  Nested Loop  (cost=6874.90..7304.90 rows=27 width=130) (actual time=316.728..317.731 rows=236 loops=1)
              Buffers: shared hit=6245
              ->  HashAggregate  (cost=6874.62..6875.06 rows=44 width=16) (actual time=316.704..316.741 rows=507 loops=1)
                    Group Key: ex2.candid_id
                    Batches: 1  Memory Usage: 97kB
                    Buffers: shared hit=4664
                    ->  Hash Join  (cost=2634.05..6874.51 rows=44 width=16) (actual time=143.496..316.538 rows=683 loops=1)
                          Hash Cond: (ex2.company_id = c2.id)
                          Buffers: shared hit=4664
                          ->  Seq Scan on experience_user ex2  (cost=0.00..4201.94 rows=14673 width=24) (actual time=0.080..172.809 rows=11981 loops=1)
                                Filter: (role ~~* ANY ('{"%product manager%",%pm%,"%product owner%","%프로덕트 매니저%","%프로덕트 오너%",%manager%,%매니저%,%product%}'::text[]))
                                Rows Removed by Filter: 57316
                                Buffers: shared hit=2816
                          ->  Hash  (cost=2632.88..2632.88 rows=94 width=8) (actual time=143.016..143.016 rows=325 loops=1)
                                Buckets: 1024  Batches: 1  Memory Usage: 21kB
                                Buffers: shared hit=1848
                                ->  Seq Scan on company_db c2  (cost=0.00..2632.88 rows=94 width=8) (actual time=2.872..142.923 rows=325 loops=1)
                                      Filter: (name ~~* ANY ('{%naver%,%네이버%,%kakao%,%카카오%,%line%,%라인%,%coupang%,%쿠팡%,%baemin%,%배달의민족%,"%delivery hero%",%woowhan%}'::text[]))
                                      Rows Removed by Filter: 31070
                                      Buffers: shared hit=1848
              ->  Index Scan using candid_pkey on candid c  (cost=0.29..9.76 rows=1 width=99) (actual time=0.002..0.002 rows=0 loops=507)
                    Index Cond: (id = ex2.candid_id)
                    Filter: ((total_exp_months <= 144) AND ((location ~~* ANY ('{%korea%,%seoul%,%korean%}'::text[])) OR (SubPlan 1)))
                    Rows Removed by Filter: 1
                    Buffers: shared hit=1581
                    SubPlan 1
                      ->  Index Scan using idx_edu_user_candid_id on edu_user eu  (cost=0.29..8.48 rows=1 width=0) (actual time=0.009..0.009 rows=0 loops=21)
                            Index Cond: (candid_id = c.id)
                            Filter: (school ~~* ANY ('{"%seoul national%",%snu%,%서울대%,"%korea university%",%고려대%,%yonsei%,%연세%,%postech%,%포항공대%,%kaist%}'::text[]))
                            Rows Removed by Filter: 2
                            Buffers: shared hit=60
Planning:
  Buffers: shared hit=624
Planning Time: 13.816 ms
Execution Time: 318.033 ms
