--
-- PostgreSQL database dump
--

CREATE EXTENSION IF NOT EXISTS pg_trgm;

\restrict qF4wz2YwFRH0xmM3IB9M25Nq8PqQ183btzI3nihSz7esFV4FJnwQIMv9BHHfKOZ

-- Dumped from database version 17.6
-- Dumped by pg_dump version 18.1

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;

SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: candid; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.candid (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    last_updated_at timestamp with time zone DEFAULT now(),
    name text,
    headline text,
    location text,
    profile_picture text,
    linkedin_url text,
    total_exp_months integer,
    bio text,
    email text,
    links text[],
    summary text,
    fts tsvector
);


--
-- Name: company_db; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.company_db (
    id bigint NOT NULL,
    last_updated_at timestamp with time zone DEFAULT now() NOT NULL,
    linkedin_url text,
    name text,
    website_url text,
    description text,
    logo text,
    founded_year integer,
    location text,
    funding_url text,
    employee_count_range jsonb,
    specialities text DEFAULT '""'::text,
    related_links text,
    investors text,
    funding jsonb,
    short_description text
);


--
-- Name: edu_user; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.edu_user (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    school text,
    degree text,
    field text,
    start_date date,
    end_date date,
    url text,
    candid_id uuid DEFAULT gen_random_uuid(),
    created_at timestamp with time zone DEFAULT now() NOT NULL
);


--
-- Name: experience_user; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.experience_user (
    id bigint NOT NULL,
    candid_id uuid DEFAULT gen_random_uuid(),
    company_id bigint,
    role text,
    description text,
    months smallint,
    start_date date,
    end_date date,
    created_at timestamp with time zone DEFAULT now() NOT NULL
);


--
-- Name: experience_user_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.experience_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.experience_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: extra_experience; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.extra_experience (
    id bigint NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    title text,
    description text,
    issued_by text,
    issued_at date,
    candid_id uuid,
    type text
);


--
-- Name: extra_experience_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.extra_experience ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.extra_experience_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: organization_database_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.company_db ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.organization_database_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: publications; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.publications (
    id bigint NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    candid_id uuid,
    title text,
    published_at text,
    link text,
    abstract text,
    citation_num integer
);


--
-- Name: publications_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.publications ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.publications_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: candid candid_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.candid
    ADD CONSTRAINT candid_pkey PRIMARY KEY (id);


--
-- Name: edu_user edu_user_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.edu_user
    ADD CONSTRAINT edu_user_pkey PRIMARY KEY (id);


--
-- Name: experience_user experience_user_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.experience_user
    ADD CONSTRAINT experience_user_pkey PRIMARY KEY (id);


--
-- Name: extra_experience extra_experience_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.extra_experience
    ADD CONSTRAINT extra_experience_pkey PRIMARY KEY (id);


--
-- Name: company_db organization_database_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.company_db
    ADD CONSTRAINT organization_database_pkey PRIMARY KEY (id);


--
-- Name: publications publications_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.publications
    ADD CONSTRAINT publications_pkey PRIMARY KEY (id);


--
-- Name: candid_fts_gin_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX candid_fts_gin_idx ON public.candid USING gin (fts);


--
-- Name: idx_candid_fts; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_candid_fts ON public.candid USING gin (fts);


--
-- Name: idx_candid_headline_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_candid_headline_trgm ON public.candid USING gin (headline public.gin_trgm_ops);


--
-- Name: idx_company_db_name_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_company_db_name_trgm ON public.company_db USING gin (name public.gin_trgm_ops);


--
-- Name: idx_company_db_spec_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_company_db_spec_trgm ON public.company_db USING gin (specialities public.gin_trgm_ops);


--
-- Name: idx_company_desc_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_company_desc_trgm ON public.company_db USING gin (description public.gin_trgm_ops);


--
-- Name: idx_edu_school_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_edu_school_trgm ON public.edu_user USING gin (school public.gin_trgm_ops);


--
-- Name: idx_edu_user_candid_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_edu_user_candid_id ON public.edu_user USING btree (candid_id);


--
-- Name: idx_edu_user_field_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_edu_user_field_trgm ON public.edu_user USING gin (field public.gin_trgm_ops);


--
-- Name: idx_exp_user_candid_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_exp_user_candid_id ON public.experience_user USING btree (candid_id);


--
-- Name: idx_exp_user_role_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_exp_user_role_trgm ON public.experience_user USING gin (role public.gin_trgm_ops);


--
-- Name: idx_experience_role_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_experience_role_trgm ON public.experience_user USING gin (role public.gin_trgm_ops);


--
-- Name: idx_pub_user_candid_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_pub_user_candid_id ON public.publications USING btree (candid_id);


--
-- Name: idx_publication_title_trgm; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_publication_title_trgm ON public.publications USING gin (title public.gin_trgm_ops);


--
-- Name: candid candid_set_fts_trg; Type: TRIGGER; Schema: public; Owner: -
--




--
-- Name: edu_user edu_user_candid_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.edu_user
    ADD CONSTRAINT edu_user_candid_id_fkey FOREIGN KEY (candid_id) REFERENCES public.candid(id) ON DELETE CASCADE;


--
-- Name: experience_user experience_user_candid_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.experience_user
    ADD CONSTRAINT experience_user_candid_id_fkey FOREIGN KEY (candid_id) REFERENCES public.candid(id) ON DELETE CASCADE;


--
-- Name: experience_user experience_user_company_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.experience_user
    ADD CONSTRAINT experience_user_company_id_fkey FOREIGN KEY (company_id) REFERENCES public.company_db(id);


--
-- Name: extra_experience extra_experience_candid_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.extra_experience
    ADD CONSTRAINT extra_experience_candid_id_fkey FOREIGN KEY (candid_id) REFERENCES public.candid(id) ON DELETE CASCADE;


--
-- Name: publications publications_candid_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.publications
    ADD CONSTRAINT publications_candid_id_fkey FOREIGN KEY (candid_id) REFERENCES public.candid(id) ON DELETE CASCADE;


--
-- PostgreSQL database dump complete
--

\unrestrict qF4wz2YwFRH0xmM3IB9M25Nq8PqQ183btzI3nihSz7esFV4FJnwQIMv9BHHfKOZ

